#!/usr/bin/env python
import argparse,ROOT,os,glob,sys,subprocess
ROOT.gROOT.LoadMacro('/global/homes/b/btamadio/atlasstyle/AtlasStyle.C')
ROOT.gROOT.LoadMacro('/global/homes/b/btamadio/atlasstyle/AtlasLabels.C')
ROOT.SetAtlasStyle()
#ROOT.gROOT.SetBatch(True)
parser = argparse.ArgumentParser(add_help=False, description='Plot N_subjets')
parser.add_argument('input')
args = parser.parse_args()
filePath = args.input.strip('/')
print filePath

inFile = ROOT.TFile.Open(filePath)
miniTree = inFile.Get('miniTree')

nBins = 6
mjLabel = ROOT.TLatex()

c1 = ROOT.TCanvas('c1','c1',800,600)
c1.cd()
h3 = ROOT.TH1F('h3','h3',nBins,0.5,nBins+0.5)
h3.Sumw2()
h3.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h3','njet == 3 && MJ < 0.2','e hist')
h3.GetXaxis().SetTitle('N_{subjets}')
h3.GetYaxis().SetTitle('Fraction of jets')
h3.Scale(1/h3.Integral())
h3.SetMaximum(0.8)
h3.SetLineColor(ROOT.kBlue)

h4 = ROOT.TH1F('h4','h4',nBins,0.5,nBins+0.5)
h4.Sumw2()
h4.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h4','njet == 4 && MJ < 0.2','e hist same')
h4.GetXaxis().SetTitle('N_{subjets}')
h4.GetYaxis().SetTitle('Fraction of jets')
h4.Scale(1/h4.Integral())
h4.SetLineColor(ROOT.kRed)

h5 = ROOT.TH1F('h5','h5',nBins,0.5,nBins+0.5)
h5.Sumw2()
h5.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h5','njet >= 5 && MJ < 0.2','e hist same')
h5.GetXaxis().SetTitle('N_{subjets}')
h5.GetYaxis().SetTitle('Fraction of jets')
h5.Scale(1/h5.Integral())
h5.SetLineColor(ROOT.kGreen)

leg1 = ROOT.TLegend(0.65,0.65,0.8,0.825)
leg1.AddEntry(h3,'n_{jet} = 3','F')
leg1.AddEntry(h4,'n_{jet} = 4','F')
leg1.AddEntry(h5,'n_{jet} #geq 5','F')
leg1.SetBorderSize(0)
leg1.SetFillStyle(0)
leg1.SetTextSize(0.04)
leg1.Draw()
ROOT.ATLASLabel(0.65,0.87,'Internal')
mjLabel.DrawLatexNDC(0.65,0.5,'M_{J}^{#Sigma} < 0.2 TeV')

c2 = ROOT.TCanvas('c2','c2',800,600)
c2.cd()
h6 = ROOT.TH1F('h6','h6',nBins,0.5,nBins+0.5)
h6.Sumw2()
h6.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h6','njet == 3 && MJ > 0.2 && MJ < 0.6','e hist')
h6.GetXaxis().SetTitle('N_{subjets}')
h6.GetYaxis().SetTitle('Fraction of jets')
h6.Scale(1/h6.Integral())
h6.SetMaximum(0.8)
h6.SetLineColor(ROOT.kBlue)

h7 = ROOT.TH1F('h7','h7',nBins,0.5,nBins+0.5)
h7.Sumw2()
h7.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h7','njet == 4 && MJ > 0.2 && MJ < 0.6','e hist same')
h7.GetXaxis().SetTitle('N_{subjets}')
h7.GetYaxis().SetTitle('Fraction of jets')
h7.Scale(1/h7.Integral())
h7.SetLineColor(ROOT.kRed)

h8 = ROOT.TH1F('h8','h8',nBins,0.5,nBins+0.5)
h8.Sumw2()
h8.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h8','njet >= 5 && MJ > 0.2 && MJ < 0.6','e hist same')
h8.GetXaxis().SetTitle('N_{subjets}')
h8.GetYaxis().SetTitle('Fraction of jets')
h8.Scale(1/h8.Integral())
h8.SetLineColor(ROOT.kGreen)

leg2 = ROOT.TLegend(0.65,0.65,0.8,0.825)
leg2.AddEntry(h6,'n_{jet} = 3','F')
leg2.AddEntry(h7,'n_{jet} = 4','F')
leg2.AddEntry(h8,'n_{jet} #geq 5','F')
leg2.SetBorderSize(0)
leg2.SetFillStyle(0)
leg2.SetTextSize(0.04)
leg2.Draw()
ROOT.ATLASLabel(0.65,0.87,'Internal')
mjLabel.DrawLatexNDC(0.55,0.5,'0.2 TeV < M_{J}^{#Sigma} < 0.6 TeV')


c3 = ROOT.TCanvas('c3','c3',800,600)
c3.cd()
h9 = ROOT.TH1F('h9','h9',nBins,0.5,nBins+0.5)
h9.Sumw2()
h9.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h9','njet == 3 && MJ > 0.6','e hist')
h9.GetXaxis().SetTitle('N_{subjets}')
h9.GetYaxis().SetTitle('Fraction of jets')
h9.Scale(1/h9.Integral())
h9.SetMaximum(0.8)
h9.SetLineColor(ROOT.kBlue)

h10 = ROOT.TH1F('h10','h10',nBins,0.5,nBins+0.5)
h10.Sumw2()
h10.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h10','njet == 4 && MJ > 0.6','e hist same')
h10.GetXaxis().SetTitle('N_{subjets}')
h10.GetYaxis().SetTitle('Fraction of jets')
h10.Scale(1/h10.Integral())
h10.SetLineColor(ROOT.kRed)

h11 = ROOT.TH1F('h11','h11',nBins,0.5,nBins+0.5)
h11.Sumw2()
h11.SetMarkerSize(0)
miniTree.Draw('jet_NTrimSubjets>>h11','njet >= 5 && MJ > 0.6','e hist same')
h11.GetXaxis().SetTitle('N_{subjets}')
h11.GetYaxis().SetTitle('Fraction of jets')
h11.Scale(1/h11.Integral())
h11.SetLineColor(ROOT.kGreen)

leg3 = ROOT.TLegend(0.65,0.65,0.8,0.825)
leg3.AddEntry(h9,'n_{jet} = 3','F')
leg3.AddEntry(h10,'n_{jet} = 4','F')
leg3.AddEntry(h11,'n_{jet} #geq 5','F')
leg3.SetBorderSize(0)
leg3.SetFillStyle(0)
leg3.SetTextSize(0.04)
leg3.Draw()
ROOT.ATLASLabel(0.65,0.87,'Internal')
mjLabel.DrawLatexNDC(0.65,0.5,'M_{J}^{#Sigma} > 0.6 TeV')

etaBins : [0,0.5,1.0,1.5,2.0]
ptBins : [0.2,0.221,0.244,0.270,0.293,0.329,0.364,0.402,0.445,0.492,0.544,0.6,0.644,0.733,0.811,0.896]


